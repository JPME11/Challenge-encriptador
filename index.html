<!DOCTYPE html>

<html lang="es">
    

    <head>

        <meta charset="UTF-8">
        <title>Encriptador JP</title>
        <link rel="stylesheet" href="reset.css">
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100&display=swap" rel="stylesheet">

    </head>

    <body>

        <header>

        </header>

        <form>

            <textarea id="mensaje" placeholder="Ingrese el mensaje..."></textarea>

        </form>

        <div class="output">

            <img id="imgEsperando" src="Recursos/Waiting-pana.png">
            <p id="textoEsperando">Por favor ingresa el mensaje que quieras encriptar o desencriptar.</p>
            <p id="resultado"></p>
            <input type="button"  onclick="copiar()" value="COPIAR" class="copyButton">

        </div>

        <div class="buttons">

            <input type="button"  onclick="encriptar()" value="ENCRIPTAR" class="codButton">
            <input type="button"  onclick="desencriptar()" value="DESENCRIPTAR" class="decodButton">

        </div>

        <script>

            let textArea = document.getElementById("mensaje"); 
            textArea.focus();  

            document.getElementById("resultado").style.display="none";

            function encriptar(){
                let msj = document.getElementById("mensaje").value;
                document.getElementById("imgEsperando").style.display="none";
                document.getElementById("textoEsperando").style.display="none";
                var msjArray = msj.split('');
                size = msjArray.length;
                for(var aux=0; aux<size; aux++){
                    if(msjArray[aux] == "a"){
                        msjArray[aux]="ai";
                    }
                    else if(msjArray[aux] == "e"){
                        msjArray[aux]="enter";
                    }
                    else if(msjArray[aux] == "i"){
                        msjArray[aux]="imes";
                    }
                    else if(msjArray[aux] == "o"){
                        msjArray[aux]="ober";
                    }
                    else if(msjArray[aux] == "u"){
                        msjArray[aux]="ufat";
                    }
                }
                let resetTextarea = document.getElementById("mensaje");
                resetTextarea.value = resetTextarea.defaultValue;
                resetTextarea.focus();
                let texto = msjArray.join('');
                let parrafo = document.getElementById("resultado");
                parrafo.innerHTML = texto;
                document.getElementById("resultado").style.display="block";
            }

            function desencriptar(){
                let msj = document.getElementById("mensaje").value;
                document.getElementById("imgEsperando").style.display="none";
                document.getElementById("textoEsperando").style.display="none";
                var msjArray = msj.split('');
                size = msjArray.length;

                for(var aux=0; aux<size; aux++){
                    if(msjArray[aux] == "a"){
                        msjArray.splice(aux + 1, 1);
                    }
                    else if(msjArray[aux] == "e"){
                        msjArray.splice(aux + 1, 4);
                    }
                    else if(msjArray[aux] == "i"){
                        msjArray.splice(aux + 1, 3);
                    }
                    else if(msjArray[aux] == "o"){
                        msjArray.splice(aux + 1, 3);
                    }
                    else if(msjArray[aux] == "u"){
                        msjArray.splice(aux + 1, 3);
                    }
                }
                let resetTextarea = document.getElementById("mensaje");
                resetTextarea.value = resetTextarea.defaultValue;
                resetTextarea.focus();
                let texto = msjArray.join('');
                let parrafo = document.getElementById("resultado");
                parrafo.innerHTML = texto;
                document.getElementById("resultado").style.display="block";
            }

            function copiar(){

                let textoCopiado = document.getElementById("resultado");
                var parrafo = textoCopiado.innertext || textoCopiado.textContent;

                let temp = document.createElement("textarea");
                temp.value = parrafo;

                document.body.appendChild(temp);
                temp.select();
                document.execCommand("copy");
                document.body.removeChild(temp);
            }

        </script>

    </body>

</html>